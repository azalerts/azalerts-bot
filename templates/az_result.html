<!doctype html>
<html lang="nl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Resultaat • AZAlerts</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
  <style>
    .container { max-width: 760px; margin: 1.2rem auto; padding: 0 1rem; }
    .tools { display:flex; gap:.5rem; align-items:center; margin-bottom:.5rem; }
    .btn { padding:.55rem .8rem; border-radius:10px; border:1px solid #cfcfcf; background:#fff; cursor:pointer; font-weight:600; }
    .btn:focus { outline: 2px solid #e10600; outline-offset: 1px; }
    .titlecard, .card { background:#fff; border:1px solid #eee; border-radius:12px; padding: .9rem 1rem; margin-bottom: .9rem; }
    textarea { width:100%; min-height: 130px; font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; line-height:1.5; }
    .hint { color:#666; font-size:.95rem; }
  </style>
</head>
<body>
  <header class="topbar">
    <div class="brand">
      <img src="{{ url_for('static', filename='img/azalerts-logo.png') }}" alt="AZAlerts" class="brand-logo" />
      <span>AZAlerts</span>
    </div>
    <nav><a href="/">Nieuwe URL</a></nav>
  </header>

  <main class="container">
    {% with msgs = get_flashed_messages() %}
      {% if msgs %}
        <div class="alert">
          {% for m in msgs %}<p>{{ m }}</p>{% endfor %}
        </div>
      {% endif %}
    {% endwith %}

    {% if result and result.title %}
      <section class="titlecard">
        <div class="tools">
          <button type="button" id="copyTitleBtn" class="btn">Kopieer titel</button>
        </div>
        <textarea id="titleBox" rows="2" aria-label="Titel">{{ result.title }}</textarea>
      </section>
    {% endif %}

    <section class="card">
      <div class="tools">
        <button type="button" id="copyTextBtn" class="btn">Kopieer tekst</button>
      </div>
      <textarea id="resultBox" rows="18" aria-label="Parafraseerde tekst">{{ output_text }}</textarea>
      <p class="hint">Tip: selecteer alles met ⌘A / Ctrl+A en kopieer met ⌘C / Ctrl+C.</p>
      <p class="hint"><a href="/">← Parafraseer nog een artikel</a></p>
    </section>
  </main>

  <script>
    (function(){
      const titleBox = document.getElementById('titleBox');
      const copyTitleBtn = document.getElementById('copyTitleBtn');
      const textBox = document.getElementById('resultBox');
      const copyTextBtn = document.getElementById('copyTextBtn');

      async function copyEl(el) {
        el.select();
        try { await navigator.clipboard.writeText(el.value); }
        catch(_) { document.execCommand('copy'); }
      }

      copyTitleBtn?.addEventListener('click', () => copyEl(titleBox));
      copyTextBtn?.addEventListener('click', () => copyEl(textBox));
    })();
  </script>
</body>
</html>
